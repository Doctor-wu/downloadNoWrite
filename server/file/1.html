<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="renderer" content="webkit">
    <title>东莞理工学院中央认证系统</title>
    <meta name="keywords" content="中央认证系统,DGUT,CAS,东莞理工学院">
    <meta name="description" content="东莞理工学院中央认证系统 - Power By DGUT.">
    <link rel="icon" herf="/static/home/pc/assets/favicon.ico" />
    <link rel="stylesheet" href="/static/home/pc/css/normailze.css" />
    <link rel="stylesheet" href="/static/home/pc/css/modal.css" />
    <link rel="stylesheet" href="/LoginPage.css" />
    <script type="text/javascript" src="//at.alicdn.com/t/font_350887_26wmq3zxisdlhaor.js"></script>

    <!--[if IE 9]>
      <link rel="stylesheet" href="/static/home/pc/css/CasPage-IE9.css" />
    <![endif]-->
    <!--[if lte IE 8]>
        <link rel="stylesheet" href="/static/home/pc/css/CasPage-IE.css" />
    <![endif]-->
    <!--[if lt IE 8]>
        <style>
          .iconHelp,
          .weiXinLogin {
            margin-top: -20px;
          }
          .contentLoginText {
            padding-top: 50px;
          }
          .weiXinLogin {
              margin-top: 0;
          }
          .otherMethod {
              padding-bottom: 30px;
          }
        </style>
    <![endif]-->
</head>
<body>
    <div id="HelpPage" class="HelpPage loginPage">
      <div class="HelpPageContent">
          <!--[if (gte IE 9)|(!IE)]> -->
          <a href="/home/Oauth/getToken.html?appid=ibpstest&state=home" class="logoStyle">
              <svg class="icon" aria-hidden="true">
                  <use xlink:href="#icon-dgut_black"></use>
              </svg>
              <div class="logoHr"></div>
              <svg class="icon2" aria-hidden="true">
                  <use xlink:href="#icon-zhongyangrenzhengxitong"></use>
              </svg>
          </a>
          <!-- <![endif]-->
          <!--[if lte IE 8]>
            <a class="logoStyleImage" href="/home/Oauth/getToken.html?appid=ibpstest&state=home"><img src="/static/home/pc/assets/logo_20178182.png" alt="东莞理工学院——中央认证系统"/></a>
          <![endif]-->
        <div class="contentShow">
          <div class="titleHelp">
              <span class="languageTitle pullLeft">
                  <select defaultValue="ch" class="changeLanguage" id="languageStatus">
                    <option id="ch" value="ch">简体中文</option>
                    <option id="en" value="en">English</option>
                  </select>
              </span>
                            <span id="titleLogin" class="centerTitle" style="margin: auto;position: absolute;left: 50%;transform: translate(-50%, 0);">欢迎登录</span>
                            <a id="require" href="/home/Oauth/help.html" target="_blank">
                  <img class="iconHelp pullRight" alt="require" src="/static/home/pc/assets/require.png" />
              </a>
              <a id="requireHover" style="display: none" href="/home/Oauth/help.html" target="_blank">
                <img class="iconHelp pullRight" alt="require" src="/static/home/pc/assets/requireHover.png" />
              </a>
                            <a href="/home/Oauth/getToken/appid/wechatverify/state/wechat_verify.html" class="wl-icon-wrp" id="safe-btn">
                  <svg class="wl-icon" aria-hidden="true">
                      <use xlink:href="#icon-anquan"></use>
                  </svg>
              </a>
                        </div>
          <div class="clearfix contentLoginText" >
            <div class="remarkText"><img class="iconRemark" alt="remark" src="/static/home/pc/assets/remark.png" />
              <span id="remarkTextSpan">欢迎使用东莞理工学院中央认证登录系统</span>
              <marquee scrollamount="3" id="remarkTextMarquee" style="display: none">Welcome to the Central Authentication Login System of Dongguan University of technology</marquee>
              <span class="pullRight changePassText"><a id="titleChangePass2" href="" target="_blank"></a></span>
            </div>
              <form autocomplete="on">
                <div>
                  <div>
                    <input id="username" type="text" name="username" autocomplete="on" placeholder="请输入中央认证账号"/>
                  </div>
                  <div>
                    <input id="casPassword" class="secondInputBottom8" type="password" name="password" autocomplete="on" placeholder="请输入中央认证密码"/>
                  </div>
                  <div class="loginHandle" style="display: flex;align-items: center;flex-direction: row;justify-content: space-between">
                                            <a id='securitySettingTitle' style="border-right: 0;padding: 0;padding-left:10px;" href="/home/Oauth/getToken/appid/wechatverify/state/wechat_verify.html">安全设置</a>
                                          <div class="weiXinLogin pullRight">
                        <a id="weiXinUnBinding" href="/home/Wechat/unbind.html">微信解绑</a>
                        <a id="titleChangePass" href="/home/Oauth/changePassword.html">修改密码</a>
                        <a id="titleCallBack" href="/home/Phone/phoneCallBackPassword.html">找回密码</a>
                    </div>
                  </div>
                  <div class="textAlign">
                    <span id="loginBtn" class="loginSubmit" style="margin: 30px auto 20px" onclick="submitDo()">登录</span>
                  </div>
                </div>
                <div class="otherMethod">
                  <div class="hr"></div><span id="otherMethod">其他登录渠道</span><div class="hr"></div>
                  <div class="handleLogin">
                                            <a href="/home/Wechat/qrLogin/state/ibpstest_%2A_home.html">
                          <span class="changeMethod"><img class="iconHelp" alt="require" src="/static/home/pc/assets/loginWeiXinIcon.png" /></span><span id="weiXinLogin" class="changeMethodText">微信登录</span>
                      </a>
                  </div>
                  <div class="handleLogin">
                      <a href="/home/Oauth/getToken/appid/ibpstest/state/home/type/2.html">
                          <span class="changeMethod"><img class="iconHelp" alt="require" src="/static/home/pc/assets/loginUserIcon.png" /></span><span id="visitLogin" class="changeMethodText">访客登录</span>
                      </a>
                  </div>
                </div>
            </form>
        </div>
          <div class="loginRemind">
            <p id="loginRemindTitle">特别提醒</p>
            <div id="loginRemind">
                <p>1. 请注意甄别东莞理工学院中央认证系统唯一官方域名<a href="https://cas.dgut.edu.cn" target="_blank">（cas.dgut.edu.cn）</a>和微信公众号（智慧莞工），慎防钓鱼网站和虚假微信号窃取您的账号和密码信息。<br/>2. 本系统支持手机短信找回密码，点此进行<a href="/home/phone/bindPhone.html" target="_blank"> 手机绑定 </a>或<a href="/home/phone/rebindPhone.html" target="_blank"> 手机改绑 </a>。<br/>3. 本系统仅向校内应用开放接入，<a href="http://ehall.dgut.edu.cn/" target="_blank">点此进入网上办事大厅进行相关申请</a>。</p>
            </div>
          </div>
          <div class="footer">Copyright &copy; 2017 DGUT All Rights Reserved.</div>
        </div>
      </div>
      <div id="alertModal" class="alertModal">
        <div class="alertModalTitle"><span id="Reminder">提示</span><img class="pullRight iconHelp closeIcon" alt="require" src="/static/home/pc/assets/close.png" /></div>
        <div id="alertModalContent" class="alertModalContent">提交出错，请重新输入提交</div>
        <div id="sureClose" class="textAlign"><a id="alertModalSure">确定</a></div>
      </div>
      <div id="alertModalS" class="alertModal">
         <div class="alertModalTitle"><span id="PhoneBinding">手机绑定</span><img class="pullRight iconHelp closeIconS" alt="require" src="/static/home/pc/assets/close.png" /></div>
         <div id="alertModalContentBind" class="alertModalContent">中央认证系统支持用户通过绑定的手机来重置密码，当用户忘记密码后，可以自助重置，请先进行手机绑定。</div>
         <div class="pullRight"><a id="alertModalSureBind" href="/home/phone/bindPhone.html">立即绑定</a></div>
      </div>
      <div id="alertModalT" class="alertModal alertModalT">
          <div class="alertModalTitle"><span id="PhoneBindingT">手机绑定</span><img class="pullRight iconHelp closeIconT" alt="require" src="/static/home/pc/assets/close.png" /></div>
          <div id="alertModalContentBindT" class="alertModalContent">中央认证系统支持用户通过绑定的手机来重置密码，当用户忘记密码后，可以自助重置，是否现在进行手机绑定？</div>
          <div><a id="alertModalSureBindT" class="pullRight" href="/home/phone/bindPhone.html">立即绑定</a><a id="alertModalSureBindTLast" class="pullRight">以后再绑</a></div>
      </div>
    </div>
    <div class="wl-modal-bg" id="weixin-binding-modal">
        <div class="wl-modal">
            <div class="wl-modal-body">
                <p id="weChatBindTitle1">请使用手机微信扫描以下二维码，并输入中央认证账号绑定微信号，绑定成功后请点击已绑定。</p>
                                <img src="/static/home/pc/assets/qrcode-binding.png" alt="" class="QR-code">
                                <button id="weChatBindBtn" class="wl-btn wl-btn-primary" onclick="submitDo()">已绑定</button>
            </div>
        </div>
    </div>
    <div class="wl-modal-bg" id="weixin-follow-modal">
        <div class="wl-modal">
            <div class="wl-modal-body">
                                <img src="/static/home/pc/assets/qrcode-follow.jpg" alt="" class="QR-code">
                                <p id="scanningTitle">请使用手机扫码关注”智慧莞工”公众号</p>
                <button id="followed" style="display: block;margin: auto;" class="wl-btn wl-btn-primary" onclick="submitDo()">已关注</button>
            </div>
        </div>
    </div>
    <!-- 弹出二维码模态框-->
    <div class="wl-modal-bg" id="qr-code">
        <div class="wl-modal">
            <div class="wl-modal-body">
                                <img src="/static/home/pc/assets/qrcode-follow.jpg" alt="" class="QR-code" width="420" height="420">
                                <!--<p id="scanningTitleSec" style="text-align: center;">请使用手机扫码关注”智慧莞工”公众号</p>-->
                <button id="followedSec" style="display: block;margin: auto;" class="wl-btn wl-btn-primary" onclick="qrCodeModal.setVisible(false);">关闭</button>
            </div>
        </div>
    </div>
    <!--弹出二维码模态框 end-->
    <div class="wl-modal-bg" id="weixin-check-modal">
        <div class="wl-modal">
            <div class="wl-modal-header">
                <span>
                    <span id="wechatVerify">微信验证</span>
                    <span id="wechatPhoneVerify" class="sub-title">手机微信验证码</span>
                </span>
                <span class="wl-icon-wrp" style="cursor: pointer" onclick="weixinCheckModal.setVisible(false);">
                    <svg class="wl-icon" aria-hidden="true">
                        <use xlink:href="#icon-guanbi"></use>
                    </svg>
                </span>
            </div>
            <div class="wl-modal-body">
                <p id="wechatVerifyAlert">提示:请在“智慧莞工”公众号获取的微信验证码填入下框中。</p>
                <div>
                    <label id="wechatVerifyCode">微信验证码：</label>
                    <span class="wl-search-wrp" style="width:220px">
                        <input id='verifyInputCode' style="width: 100%" type="text" class="wl-search" placeholder="请输入验证码">
                    </span>
                </div>
                <div class="wl-clearfix">
                    <button id='confirmBtn' class="wl-btn wl-btn-primary wl-right" disabled onclick="submitDo()">确定</button>
                    <button id='cancelBtn' class="wl-btn wl-right" style="margin-right: 8px;" onclick="weixinCheckModal.setVisible(false);verificationCodeInput.val('')">取消</button>
                </div>
            </div>
        </div>
    </div>
    <div class="wl-modal-bg" id="fresh-man-modal">
        <div class="wl-modal" style="width: 360px;height: 184px;">
            <div class="wl-modal-body" style="margin-top: 20px;">
                <svg style="width: 24px;height: 24px;" aria-hidden="true">
                    <use xlink:href="#icon-chenggong"></use>
                </svg>
                <h4 style="font-size: 14px;display: inline-block;margin: 0 10px;vertical-align: top;line-height: 24px;">
                    登录成功，请点击下一步继续完成新生报到流程
                </h4>
                <p style="font-size: 14px;line-height: 1.5em;color: red;margin-left: 34px;width: 320px;">在操作过程中，请按照系统提示完成每一步操作，否则无法完成新生报到流程。点击“下一步”继续新生报到流程。</p>
                <a href="/home/freshman/freshmanStep.html" class="wl-btn wl-btn-primary wl-right">下一步</a>
            </div>
        </div>
    </div>
    <!--[if lte IE 8]>
        <script type="text/javascript">
          var clientHeight = document.documentElement.clientHeight;
          document.getElementById('HelpPage').style.height = clientHeight + "px";
        </script>
    <![endif]-->
    <script type="text/javascript" src="/static/home/pc/js/jquery-1.11.3.min.js"></script>
    <!--<script type="text/javascript" src="/static/home/pc/js/jquery.placeholder.js"></script>-->
    <script type="text/javascript" src="/static/home/pc/js/chaLang.js"></script>
    <script type="text/javascript" src="//at.alicdn.com/t/font_721037_v1xe83p5fe.js"></script>
    <script src="//at.alicdn.com/t/font_370252_4ceipsap79c.js"></script>
    <script type="text/javascript" src="/static/home/pc/js/showmodal.js"></script>
    <script type="text/javascript">
        /*立个flag*/
        var flag = true;
        var verificationCodeInput = $('#weixin-check-modal input');

        function Modal(options) {
            var defaultOptions = {
                visible: false,
                selector: '.wl-modal-bg',
                maskClosable: true,
            };

            this.options = $.extend({}, defaultOptions, options);
            this.modal = $(this.options.selector);

            this._init();
        }

        Modal.prototype._init = function() {
            if(this.options.maskClosable) {
                var _this = this;
                // this.modal.on('click', function(e) {
                //     if($(e.target).is(_this.modal)) {
                //         _this.setVisible(false);
                //     }
                // });
            }

            this.setVisible(this.options.visible);
        }

        Modal.prototype.setVisible = function(visible, callback) {
            this.options.visible = visible;
            if(visible) {
                this.modal.css('display', 'block');
            } else {
                verificationCodeInput.val('');
                this.modal.css('display', 'none');
            }
            if(callback) {
                callback();
            }
        }

        var weixinBindingModal = new Modal({selector: '#weixin-binding-modal'});
        var weixinCheckModal = new Modal({selector: '#weixin-check-modal'});
        var weixinFollowModal = new Modal({selector: '#weixin-follow-modal'});
        var qrCodeModal = new Modal({selector: '#qr-code'});


      //  $('input').placeholder();
      // 处理经过js文件要做到的跳转不了问题
      var bind_url = "/home/phone/bindPhone.html";
      var rebind_url = "/home/phone/rebindPhone.html";

      var freshManModal = new Modal({
          selector: '#fresh-man-modal',
          maskClosable: true,
      });

      var language = document.getElementById("languageStatus");
      var titleLogin = document.getElementById("titleLogin");
      var titleLoginVerify = document.getElementById("titleLoginVerify");
      var loginRemind = document.getElementById("loginRemind");
      var loginRemindTitle = document.getElementById("loginRemindTitle");
      var titleChangePass2 = document.getElementById("titleChangePass2");
      var titleChangePass = document.getElementById("titleChangePass");
      var username = document.getElementById("username");
      var casPassword = document.getElementById("casPassword");
      var titleCallBack = document.getElementById("titleCallBack");
      var weiXinUnBinding = document.getElementById("weiXinUnBinding");
      var weiXinLogin = document.getElementById("weiXinLogin");
      var visitLogin = document.getElementById("visitLogin");
      var loginBtn = document.getElementById("loginBtn");
      var otherMethod = document.getElementById("otherMethod");
      var sureClose = document.getElementById("sureClose");
      var Reminder = document.getElementById("Reminder");
      var PhoneBinding = document.getElementById("PhoneBinding");
      var PhoneBindingT = document.getElementById("PhoneBindingT");
      var alertModalSure = document.getElementById("alertModalSure");
      var alertModal = document.getElementById("alertModal");
      var alertModalT = document.getElementById("alertModalT");
      var alertModalS = document.getElementById("alertModalS");
      var alertModalContent = document.getElementById("alertModalContent");
      var remarkTextSpan = document.getElementById("remarkTextSpan");
      var remarkTextMarquee = document.getElementById("remarkTextMarquee");
      var alertModalContentBind = document.getElementById("alertModalContentBind");
      var alertModalContentBindT = document.getElementById("alertModalContentBindT");
      var alertModalSureBind = document.getElementById("alertModalSureBind");
      var alertModalSureBindT = document.getElementById("alertModalSureBindT");
      var alertModalSureBindTLast = document.getElementById("alertModalSureBindTLast");
      var backLoginTitle = document.getElementById("backLoginTitle");
      var securitySettingTitle = document.getElementById("securitySettingTitle");
      var verifyInputCode = document.getElementById("verifyInputCode");
      var weChatBindTitle1 = document.getElementById("weChatBindTitle1");
      var scanningTitle = document.getElementById("scanningTitle");
//      var scanningTitleSec = document.getElementById("scanningTitleSec");
      var wechatVerify = document.getElementById("wechatVerify");
      var wechatPhoneVerify = document.getElementById("wechatPhoneVerify");
      var wechatVerifyAlert = document.getElementById("wechatVerifyAlert");
      var wechatVerifyCode = document.getElementById("wechatVerifyCode");
      var confirmBtn = document.getElementById("confirmBtn");
      var cancelBtn = document.getElementById("cancelBtn");
      var weChatBindBtn = document.getElementById("weChatBindBtn");
      var followedBtn = document.getElementById("followed");
//      var en = document.getElementById("en");
//      var ch = document.getElementById("ch");
      // 保存提示语的变量
      var remarkText_cn = "欢迎使用东莞理工学院中央认证登录系统";
      var remarkText_en = "Welcome to the Central Authentication Login System of Dongguan University of technology";
      var linkText_cn = "";
      var linkText_en = "";
      remarkTextSpan.innerHTML = remarkText_cn;
      remarkTextMarquee.innerHTML = remarkText_cn;
      // 判断长度是否超出，超出则滚动显示
      if (remarkTextSpan.innerHTML.length>22) {
        remarkTextSpan.style.display= 'none';
        remarkTextMarquee.style.display = 'inline-block';
      }
      // iconhelp hover的时候改变颜色
      var requireHover = document.getElementById("requireHover");
      var require = document.getElementById("require");
      $("#require").mouseover(function(){
        requireHover.style.display = 'inline';
        require.style.display = 'none';
      });
      $("#requireHover").mouseout(function(){
        requireHover.style.display = 'none';
        require.style.display = 'inline';
      });
      // 设置languageIndex处理选择中英切换后再换页，语言保持
      var index=(document.cookie.split(";")[0].split('=')[1] !== '1' && document.cookie.split(";")[0].split('=')[1] !== '0') ? 0 : parseInt(document.cookie.split(";")[0].split('=')[1]);
//      document.cookie = "languageIndex="+index;
      language.options[index].defaultSelected = true;
      changeLanguage();
      language.onclick = function(){
        index=language.selectedIndex;
        changeLanguage();
      };
      // 显示学生模态框
      function showAlertModalS() {
          alertModalS.style.display = 'block';
      }
      // 显示教师模态框
      function showAlertModalT() {
          alertModalT.style.display = 'block';
      }
      function changeLanguage() {
                    titleLogin.innerHTML = $.chaLang(index, "titleLogin");
          securitySettingTitle.innerHTML = $.chaLang(index, "securitySettingTitle");
                  weiXinUnBinding.innerHTML = $.chaLang(index, "weiXinUnBinding");
        followedBtn.innerHTML = $.chaLang(index, "followed");
        titleChangePass.innerHTML = $.chaLang(index, "titleChangePass");
        titleCallBack.innerHTML = $.chaLang(index, "titleCallBack");
        otherMethod.innerHTML = $.chaLang(index, "otherMethod");
        weiXinLogin.innerHTML = $.chaLang(index, "weiXinLogin");
        visitLogin.innerHTML = $.chaLang(index, "visitLogin");
        username.setAttribute("placeholder", $.chaLang(index, "username"));
        verifyInputCode.setAttribute("placeholder", $.chaLang(index, "verifyInputCode"));
        casPassword.setAttribute("placeholder",$.chaLang(index, "casPassword"));
        loginRemind.innerHTML = $.chaLang(index, "loginRemind");
        loginRemindTitle.innerHTML = $.chaLang(index, "loginRemindTitle");
        loginBtn.innerHTML = $.chaLang(index, "loginBtn");
        alertModalSure.innerHTML = $.chaLang(index, "sureBtn");
        Reminder.innerHTML = $.chaLang(index, "Reminder");
        PhoneBinding.innerHTML = $.chaLang(index, "PhoneBinding");
        PhoneBindingT.innerHTML = $.chaLang(index, "PhoneBinding");
        alertModalContentBind.innerHTML = $.chaLang(index, "alertModalContentBind");
        alertModalContentBindT.innerHTML = $.chaLang(index, "alertModalContentBindT");
        alertModalSureBind.innerHTML = $.chaLang(index, "alertModalSureBind");
        alertModalSureBindT.innerHTML = $.chaLang(index, "alertModalSureBind");
        alertModalSureBindTLast.innerHTML = $.chaLang(index, "alertModalSureBindTLast");
          confirmBtn.innerHTML = $.chaLang(index, "confirmBtn");
          cancelBtn.innerHTML = $.chaLang(index, "cancelBtn");
          weChatBindTitle1.innerHTML = $.chaLang(index, "weChatBindTitle");
          scanningTitle.innerHTML = $.chaLang(index, "scanningTitle");
//          scanningTitleSec.innerHTML = $.chaLang(index, "scanningTitleSec");
          wechatVerify.innerHTML = $.chaLang(index, "wechatVerify");
          wechatPhoneVerify.innerHTML = $.chaLang(index, "wechatPhoneVerify");
          wechatVerifyAlert.innerHTML = $.chaLang(index, "wechatVerifyAlert");
          wechatVerifyCode.innerHTML = $.chaLang(index, "wechatVerifyCode");
          weChatBindBtn.innerHTML = $.chaLang(index, "weChatBindBtn");
        // 动态获取显示提示语
        remarkTextSpan.style.display= 'inline-block';
        remarkTextMarquee.style.display = 'none';
        if(index==0) {
          remarkTextSpan.innerHTML = remarkText_cn;
          remarkTextMarquee.innerHTML = remarkText_cn;
          titleChangePass2.innerHTML = linkText_cn;
        }else if(index==1) {
          remarkTextSpan.innerHTML = remarkText_en;
          remarkTextMarquee.innerHTML = remarkText_en;
          titleChangePass2.innerHTML = linkText_en;
        }
        if (remarkTextSpan.innerHTML.length>22) {
          remarkTextSpan.style.display= 'none';
          remarkTextMarquee.style.display = 'inline-block';
        }
        document.cookie = "languageIndex="+index;
      }
      // 关闭模态框
      $('.closeIcon').click(function () {
          alertModal.style.display = 'none';
      });
      $('.closeIconS').click(function () {
          alertModalS.style.display = 'none';
      });
      $('.closeIconT').click(function () {
          alertModalT.style.display = 'none';
          if (flag != true) {
              window.location.href = flag;
          }
      });
      $('#alertModalSureBindTLast').click(function () {
          alertModalT.style.display = 'none';
          if (flag != true) {
              window.location.href = flag;
          }
      });
      sureClose.onclick = function(){
        alertModal.style.display = 'none';
      };
      // 按enter触发点击按钮事件
      $(function () {
        document.onkeydown = function (event) {
          var e = event || window.event || arguments.callee.caller.arguments[0];
          if (e && e.keyCode === 13) {
            submitDo();
          }
        };
      });
    </script>
    <script>
        var bind_url = "/home/phone/bindPhone.html";
        var rebind_url = "/home/phone/rebindPhone.html";

        var token = "0764af1bfc428f54da0ed24ccc8a3262";
        var verificationBtn = $('#weixin-check-modal .wl-btn-primary');
        verificationCodeInput.on('keyup', function(e) {
            if(verificationCodeInput.val()) {
                verificationBtn.removeAttr('disabled');
            } else {
                verificationBtn.attr('disabled', true);
            }
        });
        function submitDo() {
            var username_val = username.value;
            if (username_val === '') {
              alertModalContent.innerHTML = $.chaLang(index, "errorInfoUsername");
              alertModal.style.display = "block";
              return false;
            }
            var password_val = casPassword.value;
            if (password_val === '') {
              alertModalContent.innerHTML = $.chaLang(index, "errorInfoPassword");
              alertModal.style.display = "block";
              return false;
            }
            var wechat_verify = verificationCodeInput.val();
            $.ajax({ //请求登录处理页
                url: location.href, //登录处理页
                method: 'post',
                dataType: "json",
                data: {
                    username: username_val,
                    password: password_val,
                    __token__: token,
                    wechat_verify: wechat_verify //TODO 微信验证码
                },
                success: function (data) { //登录成功后返回的数据
                    data = JSON.parse(data);
                    weixinBindingModal.setVisible(false);
                    weixinFollowModal.setVisible(false);
                    if(data.code === 1000) {
                        weixinCheckModal.setVisible(false, function() {verificationCodeInput.val('')});
                    }
                    var messageEn = [
                        'There is no such user',  //用户不存在
                        'Verification by',
                        'Please enter user accounts', //请输入用户账号
                        'Please enter your login mobile number', //请输入您的登录手机号码。
                        'Please enter user password', //请输入用户密码
                        'Please enter your mobile phone verification code', //请输入您的手机验证码
                        'The verification code does not exist, please retrieve it', //验证码不存在
                        'The verification code has expired, please reacquire', //验证码已过期，请重新获取
                        'Login failed',
                        'Login failed',
                        'Login failed',
                        'Users do not exist or have been disabled',
                        'New users are requested to modify the original password before logging in',
                        "The user hasn't changed the password in half a year, please change the password before login",
                        'User is not authorized to access the application',
                        'There is no such user',
                        'Temporary users are requested to log in by verifying the phone',
                        'The mobile phone number has been tied to a central authentication account. Please log in as a user on campus',
                        'Token expires, please refresh the page to login again',
                        'Student users do not have a mobile phone and need to be forced to bind the phone',
                        'Teacher users and temporary users are reminded to bind their phones when they are not bound to their phones',
                        'The user is not bound to WeChat', //21--用户未绑定微信
                        'The user did not follow the public account', //22--用户未关注公众号
                        'Please enter WeChat verification code', //23--请输入微信验证码
                        'WeChat verification code error, please re-enter', //24--微信验证码错误请重新输入
                        'WeChat verification code error, please click on the landing again', //25--微信验证码错误请重新点击登陆
                    ];
                    if (data.code === 20) {
                        showAlertModalT();
                        flag = data.info;
                    } else if (data.code === 19) {
                        showAlertModalS();
                    } else if (data.code === 1) {
                       window.location.href = data.info;
                    } else if (data.code === 21) {
                        //code === 21的时候为用户未绑定微信
                        if (index == 0) {
                            alertModalContent.innerHTML = data.message;
                        } else{
                            alertModalContent.innerHTML = messageEn[data.code];
                        }

                        //TODO 前端同事需要写js弹出绑定微信二维码
                        // alertModal.style.display = "block";
                        weixinBindingModal.setVisible(true);


                    } else if (data.code === 22) {
                        //code === 22 用户未关注公众号
                        if (index == 0) {
                            alertModalContent.innerHTML = data.message;
                        } else{
                            alertModalContent.innerHTML = messageEn[data.code];
                        }

                        //TODO 前端同事需要写js弹出关注公众号二维码微信二维码
                        // alertModal.style.display = "block";
                        weixinFollowModal.setVisible(true);

                    } else if (data.code === 23) {
                        //code === 23 请输入微信验证码

                        //TODO 前端同事需要写js弹出输入验证码模态框
                        weixinCheckModal.setVisible(true, function() {verificationCodeInput.val('')});
                    } else if (data.code === 26) {
                        //新生流程
                        // alert(data.message);
                        freshManModal.setVisible(true);
                        // window.location.href = "/home/freshman/freshmanStep.html";
                    } else {
                      if (index == 0) {
                        alertModalContent.innerHTML = data.message;
                      } else{
                        alertModalContent.innerHTML = messageEn[data.code];
                      }
                      alertModal.style.display = "block";
                    }
                }
            });
        }
    </script>

    <script type="text/javascript" src="/static/home/pc/js/base64.js"></script>
    <script>
        console.log(BASE64.decoder('5aSn5YWE5byf77yM5Yir5pCe5LqL5ZGA77yB5pyJ5LuA5LmI5LqL5oOF5qyi6L+O6IGU57O75oiRa2xpbnNvbkAxNjMuY29t77yB'));
    </script>
</body>
</html>
